#!/bin/bash

WORKSPACE="GihubJobs.xcworkspace"
SCHEME="GihubJobs"
BUILD_DIR="$(pwd)/build"
CONFIGURATION="AdHoc"

ARCHIVE_FILENAME="GihubJobs.app"
IPA_FILENAME="GihubJobs.ipa"

security unlock-keychain -p $PASSWORD $HOME/Library/Keychains/login.keychain

pod install

xcodebuild -workspace "$WORKSPACE" -scheme "$SCHEME" -configuration CONFIGURATON_BUILD_DIR="$BUILD_DIR" clean build | xcpretty -c

xcrun -sdk iphoneos PackageApplication "$BUILD_DIR/$ARCHIVE_FILENAME" -o "$BUILD_DIR/$IPA_FILENAME"